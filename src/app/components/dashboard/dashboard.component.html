<ng-container
  *ngIf="{
    connectionState: connectionState$ | async,
    localState: localState$ | async,
    loading: connectionService.loading$ | async
  } as params"
>
  <app-header
    [connected]="params.connectionState.userConnected"
    [loading]="params.loading"
    (connectWallet)="onConnectWallet()"
    class="mb-auto"
  ></app-header>
  <main class="pt-3 pb-3">
    <app-notification id="main"></app-notification>
    <div class="container">
      <div class="dashboard fs-5 mb-3" *ngIf="params.connectionState.userConnected">
        <div class="row mb-5">
          <p
            *ngIf="params.connectionState.userPools?.length"
            class="col m-0 d-flex align-items-center"
          >
            You participated in {{ params.connectionState.userPools?.length }} pools
          </p>
          <p
            *ngIf="!params.connectionState.userPools?.length"
            class="col m-0 d-flex align-items-center"
          >
            You have not participated in pools, yet
          </p>
          <div
            class="d-flex align-items-center col justify-content-end"
            *ngIf="!params.localState.showCreatingForm"
          >
            <p class="m-0">You can create new pool</p>
            <button class="btn btn-danger ms-3 fs-5" (click)="showCreatingForm()">Add</button>
          </div>
        </div>
      </div>
      <app-new-pool
        *ngIf="params.localState.showCreatingForm"
        (closeForm)="onCloseNewForm()"
        (saveForm)="onSaveNewForm($event)"
      ></app-new-pool>
      <ng-container *ngIf="params.connectionState.userConnected">
        <app-pools [pools]="params.connectionState.userPools"></app-pools>
      </ng-container>
    </div>
  </main>
</ng-container>
